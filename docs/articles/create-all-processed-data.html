<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creating all processed data in the rnhanesdata package • rnhanesdata</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Creating all processed data in the rnhanesdata package">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rnhanesdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/create-all-processed-data.html">Creating all processed data in the rnhanesdata package</a>
    </li>
    <li>
      <a href="../articles/vignette_prediction.html">The predictive performance of objective activity measures derived from accelerometry data for 5-year all-cause mortality in NHANES</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/andrew-leroux/rnhanesdata">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="create-all-processed-data_files/header-attrs-2.0.7/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Creating all processed data in the rnhanesdata package</h1>
                        <h4 class="author">Andrew Leroux</h4>
            
            <h4 class="date">2020-02-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/andrew-leroux/rnhanesdata/blob/master/vignettes/create-all-processed-data.Rmd"><code>vignettes/create-all-processed-data.Rmd</code></a></small>
      <div class="hidden name"><code>create-all-processed-data.Rmd</code></div>

    </div>

    
    
<p>In this vignette we walk through the creation of the 8 primary processed datasets contained in the <em>rnhanesdata</em> package. These datasets can be organized into four categories:</p>
<ul>
<li>Activity count data (accelerometer)
<ul>
<li>PAXINTEN_C</li>
<li>PAXINTEN_D</li>
</ul>
</li>
<li>Wear/non-wear flags associated (derived from the activity count data)
<ul>
<li>Flags_C</li>
<li>Flags_D</li>
</ul>
</li>
<li>Mortality data linked to NHANES
<ul>
<li>Mortality_2011_C</li>
<li>Mortality_2011_D</li>
</ul>
</li>
<li>NHANES demographic, survey design, lifestyle, and comorbiditiy variables
<ul>
<li>Covariate_C</li>
<li>Covariate_D</li>
</ul>
</li>
</ul>
<p>The _C and _D naming convention indicates which NHANES wave the data is associated with. More specifically, _C and _D correspond to the 2003-2004 and 2005-2006 waves, respectively. This document assumes users have some familiarity with the contest of each of these datasets. See the help files associated with each of these datasets for more information.</p>
<p>Below we show users how to process this data for themselves and then write out the data in a format of their preference. The first step is to load the <em>rnhanesdata</em> package.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"rnhanesdata"</span>)</span></code></pre></div>
<div id="processing-the-accelerometry-data-and-creating-wearnon-wear-flags" class="section level1">
<h1 class="hasAnchor">
<a href="#processing-the-accelerometry-data-and-creating-wearnon-wear-flags" class="anchor"></a>Processing the accelerometry data and creating wear/non-wear flags</h1>
<p>Using the functions <em>process_accel()</em> and <em>process_flags()</em>, processing the accelerometry data and creating wear/non-wear flags is simple. In the code below we show how to download the physical activity monitor data from the NHANES website and then calculate wear/non-wear flags.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>accel_ls &lt;-<span class="st"> </span><span class="kw"><a href="../reference/process_accel.html">process_accel</a></span>(<span class="dt">names_accel_xpt =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"PAXRAW_C"</span>,<span class="st">"PAXRAW_D"</span>), <span class="dt">local=</span><span class="ot">FALSE</span>, </span>
<span id="cb2-2"><a href="#cb2-2"></a>                          <span class="dt">urls=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"https://wwwn.cdc.gov/Nchs/Nhanes/2003-2004/PAXRAW_C.ZIP"</span>,</span>
<span id="cb2-3"><a href="#cb2-3"></a>                                 <span class="st">"https://wwwn.cdc.gov/Nchs/Nhanes/2005-2006/PAXRAW_D.ZIP"</span>)</span>
<span id="cb2-4"><a href="#cb2-4"></a>                          )</span>
<span id="cb2-5"><a href="#cb2-5"></a>flags_ls &lt;-<span class="st"> </span><span class="kw"><a href="../reference/process_flags.html">process_flags</a></span>(accel_ls)</span></code></pre></div>
<p>This whole process will take some time to finish (approximately 30 minutes on a standard laptop). Downloading the data directly through <em>R</em> and then unzipping the data in <em>R</em> is, in general, slower than downloading the data outside of <em>R</em> and then reading in the (un)zipped data locally. See ?process_accel for details on how to process data that is stored locally. However, in the interest for full reproducibility we allow for the entire data processing pipeline to be conducted within <em>R</em>.</p>
<p>Once this code has executed, the object accel_ls will be a list where the first element is a data frame corresponding to the 2003-2004 accelerometry data in the 1440+ format. Similarly, the second element of accel_ls will be a data frame containing the 2005-2006 accelerometry data in the 1440+ format. These data frames are identical to the data objects PAXINTEN_C (2003-2004) and PAXINTEN_D (2005-2006) which are included in the <em>rnhanesdata</em> package. Type ?PAXINTEN_C and ?PAXINTEN_D in your <em>R</em> console for additional details. The flags_ls is object will also be a list containing two elements: Flags_C and Flags_D, corresponding the estimated wear/non-wear flag matrices for the 2003-2004 and 2005-2006 accelerometry data, respectively. The format (i.e. column names, dimensions, etc) of Flags_C and Flags_D is identical to that of PAXINTEN_C and PAXINTEN_D, only the activity count data has been replaced by wear/non-wear flags. Type ?Flags_C and ?Flags_D in your <em>R</em> console for additional details.</p>
<p>Saving the data locally is then straightforward. For example, if we wanted to create .rda files which are identical to those included in the package, we would use the following code</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>PAXINTEN_C &lt;-<span class="st"> </span>accel_ls<span class="op">$</span>PAXINTEN_C</span>
<span id="cb3-2"><a href="#cb3-2"></a>PAXINTEN_D &lt;-<span class="st"> </span>accel_ls<span class="op">$</span>PAXINTEN_D</span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a>Flags_C &lt;-<span class="st"> </span>flags_ls<span class="op">$</span>FLags_C</span>
<span id="cb3-5"><a href="#cb3-5"></a>Flags_D &lt;-<span class="st"> </span>flags_ls<span class="op">$</span>FLags_D</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="kw"><a href="https://rdrr.io/r/base/save.html">save</a></span>(PAXINTEN_C, <span class="dt">file=</span><span class="st">"PAXINTEN_C.rda"</span>, <span class="dt">compress=</span><span class="st">"xz"</span>)</span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="kw"><a href="https://rdrr.io/r/base/save.html">save</a></span>(PAXINTEN_D, <span class="dt">file=</span><span class="st">"PAXINTEN_D.rda"</span>, <span class="dt">compress=</span><span class="st">"xz"</span>)</span>
<span id="cb3-10"><a href="#cb3-10"></a></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="kw"><a href="https://rdrr.io/r/base/save.html">save</a></span>(Flags_C, <span class="dt">file=</span><span class="st">"Flags_C.rda"</span>, <span class="dt">compress=</span><span class="st">"xz"</span>)</span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="kw"><a href="https://rdrr.io/r/base/save.html">save</a></span>(Flags_D, <span class="dt">file=</span><span class="st">"Flags_D.rda"</span>, <span class="dt">compress=</span><span class="st">"xz"</span>)</span></code></pre></div>
<p>Changing the argument to file will control where the data are saved. By default the syntax above will save to wherever the current working directory is, which can be viewed by typing <em>getwd()</em> in the <em>R</em> console. Note that we use “xz”" compression here. Saving the activity count data using this compression type takes longer to complete than the default compression type, but results in substantially smaller file sizes.</p>
<p>If instead of a .rda file, you’d prefer to save the processed data as .csv, you can use the function <em>write.csv()</em> which uses similar syntax.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span>(PAXINTEN_C, <span class="dt">file=</span><span class="st">"PAXINTEN_C.csv"</span>, <span class="dt">row.names=</span><span class="ot">FALSE</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="kw"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span>(PAXINTEN_D, <span class="dt">file=</span><span class="st">"PAXINTEN_D.csv"</span>, <span class="dt">row.names=</span><span class="ot">FALSE</span>)</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="kw"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span>(Flags_C, <span class="dt">file=</span><span class="st">"Flags_C.csv"</span>, <span class="dt">row.names=</span><span class="ot">FALSE</span>)</span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="kw"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span>(Flags_D, <span class="dt">file=</span><span class="st">"Flags_D.csv"</span>, <span class="dt">row.names=</span><span class="ot">FALSE</span>)</span></code></pre></div>
</div>
<div id="processing-the-mortality-data" class="section level1">
<h1 class="hasAnchor">
<a href="#processing-the-mortality-data" class="anchor"></a>Processing the mortality data</h1>
<p>Processing the NHANES 2003-2004 and 2005-2006 mortality data is similarly simple using the <em>process_mort()</em> function contained in the <em>rnhanesdata</em> package.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>mort_ls &lt;-<span class="st"> </span><span class="kw"><a href="../reference/process_mort.html">process_mort</a></span>()</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co">#&gt; </span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="op">|</span><span class="st">                                                                            </span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="st">  </span><span class="er">|</span><span class="st">                                                                      </span><span class="er">|</span><span class="st">   </span><span class="dv">0</span>%</span>
<span id="cb5-5"><a href="#cb5-5"></a>  <span class="op">|</span><span class="st">                                                                            </span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="st">  </span><span class="er">|===================================</span><span class="st">                                   </span><span class="er">|</span><span class="st">  </span><span class="dv">50</span>%</span>
<span id="cb5-7"><a href="#cb5-7"></a>  <span class="op">|</span><span class="st">                                                                            </span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="st">  </span><span class="er">|======================================================================|</span><span class="st"> </span><span class="dv">100</span>%</span></code></pre></div>
<p>By default the <em>process_mort()</em> function looks for the raw mortality data within the <em>rnhanesdata</em> package. This can be changed by supplying a local directory to the localpath argument. See ?process_mort for more details.</p>
<p>The mortality data can then be saved in the same way that the activity count and wear/non-wear flag data were saved in the previous section</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>Mortality_<span class="dv">2011</span>_C &lt;-<span class="st"> </span>mort_ls<span class="op">$</span>Mortality_<span class="dv">2011</span>_C</span>
<span id="cb6-2"><a href="#cb6-2"></a>Mortality_<span class="dv">2011</span>_D &lt;-<span class="st"> </span>mort_ls<span class="op">$</span>Mortality_<span class="dv">2011</span>_D</span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="kw"><a href="https://rdrr.io/r/base/save.html">save</a></span>(Mortality_<span class="dv">2011</span>_C, <span class="dt">file=</span><span class="st">"Mortality_2011_C.rda"</span>, <span class="dt">compress=</span><span class="st">"xz"</span>)</span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="kw"><a href="https://rdrr.io/r/base/save.html">save</a></span>(Mortality_<span class="dv">2011</span>_D, <span class="dt">file=</span><span class="st">"Mortality_2011_D.rda"</span>, <span class="dt">compress=</span><span class="st">"xz"</span>)</span></code></pre></div>
</div>
<div id="processing-the-demographic-survey-design-lifestyle-and-comorbiditiy-variables" class="section level1">
<h1 class="hasAnchor">
<a href="#processing-the-demographic-survey-design-lifestyle-and-comorbiditiy-variables" class="anchor"></a>Processing the demographic, survey design, lifestyle, and comorbiditiy variables</h1>
<p>In this section we will reproduce the <strong>Covariate_C</strong> and <strong>Covariate_D</strong> datasets included in the <em>rnhanesdata</em> package. Processing the demographic, survey design, lifestyle and comorbidity variables included in the <strong>Covariate_C</strong> and <strong>Covariate_D</strong> datasets is a bit more involved than processing the activity count, wear/non-wear flags, and mortality data. First, the raw data used to create these sets of processed data are spread across multiple SAS XPORT (.xpt) files. As a result, there’s an initial data merging step that needs to take place. The <em>process_covar()</em> function was created to make this process as straightforward as possible. It will search a local directory for all .xpt files associated with a specific NHANES wave. By default <em>process_covar()</em> searches the raw data stored within the <em>rnhanesdata</em> package, though the directory can be specified by users. Users can choose to extract all variables across all relevant .xpt files, or request a specific set of variables. For example, creating the <strong>Covariate_C</strong> and <strong>Covariate_D</strong> datasets requires 33 variables.</p>
<p>In addition to the issue of data merging, creating many common variables of interest requires careful consideration of questionnaire skip patterns and coding for missing data, which can change from wave-to-wave. One of the variables we use to classify individual’s alcohol consumption is an example of this (ALQ130). Accordingly, we process this data separately for each wave.</p>
<p>Below, we show how to extract and merge these 33 variables required to create <strong>Covariate_C</strong> and <strong>Covariate_D</strong> .</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>covar_ls &lt;-<span class="st"> </span><span class="kw"><a href="../reference/process_covar.html">process_covar</a></span>(<span class="dt">waves=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"C"</span>,<span class="st">"D"</span>),</span>
<span id="cb7-2"><a href="#cb7-2"></a>                          <span class="dt">varnames =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"SDDSRVYR"</span>,<span class="st">"WTMEC2YR"</span>, <span class="st">"WTINT2YR"</span>,</span>
<span id="cb7-3"><a href="#cb7-3"></a>                           <span class="st">"SDMVPSU"</span>, <span class="st">"SDMVSTRA"</span>,</span>
<span id="cb7-4"><a href="#cb7-4"></a>                           <span class="st">"RIDAGEMN"</span>, <span class="st">"RIDAGEEX"</span>, <span class="st">"RIDAGEYR"</span>, <span class="st">"RIDRETH1"</span>, <span class="st">"RIAGENDR"</span>,</span>
<span id="cb7-5"><a href="#cb7-5"></a>                           <span class="st">"BMXWT"</span>, <span class="st">"BMXHT"</span>, <span class="st">"BMXBMI"</span>, <span class="st">"DMDEDUC2"</span>,</span>
<span id="cb7-6"><a href="#cb7-6"></a>                           <span class="st">"ALQ101"</span>, <span class="st">"ALQ110"</span>, <span class="st">"ALQ120Q"</span>,<span class="st">"ALQ120U"</span>, <span class="st">"ALQ130"</span>, <span class="st">"SMQ020"</span>, <span class="st">"SMD030"</span>, <span class="st">"SMQ040"</span>,</span>
<span id="cb7-7"><a href="#cb7-7"></a>                           <span class="st">"MCQ220"</span>,<span class="st">"MCQ160F"</span>, <span class="st">"MCQ160B"</span>, <span class="st">"MCQ160C"</span>,</span>
<span id="cb7-8"><a href="#cb7-8"></a>                           <span class="st">"PFQ049"</span>,<span class="st">"PFQ054"</span>,<span class="st">"PFQ057"</span>,<span class="st">"PFQ059"</span>, <span class="st">"PFQ061B"</span>, <span class="st">"PFQ061C"</span>, <span class="st">"DIQ010"</span>))</span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="co">#&gt; </span></span>
<span id="cb7-10"><a href="#cb7-10"></a>  <span class="op">|</span><span class="st">                                                                            </span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="st">  </span><span class="er">|</span><span class="st">                                                                      </span><span class="er">|</span><span class="st">   </span><span class="dv">0</span>%</span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co">#&gt;  For C cohort, 33 Covariates Found of 33 specified. Missing covariates:</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co">#&gt; </span></span>
<span id="cb7-14"><a href="#cb7-14"></a><span class="co">#&gt; </span></span>
<span id="cb7-15"><a href="#cb7-15"></a>  <span class="op">|</span><span class="st">                                                                            </span></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="st">  </span><span class="er">|===================================</span><span class="st">                                   </span><span class="er">|</span><span class="st">  </span><span class="dv">50</span>%</span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="co">#&gt;  For D cohort, 33 Covariates Found of 33 specified. Missing covariates:</span></span>
<span id="cb7-18"><a href="#cb7-18"></a><span class="co">#&gt; </span></span>
<span id="cb7-19"><a href="#cb7-19"></a><span class="co">#&gt; </span></span>
<span id="cb7-20"><a href="#cb7-20"></a>  <span class="op">|</span><span class="st">                                                                            </span></span>
<span id="cb7-21"><a href="#cb7-21"></a><span class="st">  </span><span class="er">|======================================================================|</span><span class="st"> </span><span class="dv">100</span>%</span>
<span id="cb7-22"><a href="#cb7-22"></a></span>
<span id="cb7-23"><a href="#cb7-23"></a>Covariate_C &lt;-<span class="st"> </span>covar_ls<span class="op">$</span>Covariate_C</span>
<span id="cb7-24"><a href="#cb7-24"></a>Covariate_D &lt;-<span class="st"> </span>covar_ls<span class="op">$</span>Covariate_D</span></code></pre></div>
<p>The <em>process_covar</em> function will print to the console how many variables were found for each of the NHANES waves considered (see output above). At this point all variables in each element of covar_ls are numeric, as can be seen by using the <em>str()</em> function</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(Covariate_C)</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="co">#&gt; 'data.frame':    10122 obs. of  34 variables:</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co">#&gt;  $ SEQN    : int  21005 21006 21007 21008 21009 21010 21011 21012 21013 21014 ...</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">#&gt;  $ ALQ101  : num  NA NA NA NA 1 1 NA NA NA NA ...</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co">#&gt;  $ ALQ110  : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co">#&gt;  $ ALQ120Q : num  NA NA NA NA 0 7 NA NA NA NA ...</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">#&gt;  $ ALQ120U : num  NA NA NA NA NA 1 NA NA NA NA ...</span></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="co">#&gt;  $ ALQ130  : num  NA NA NA NA NA 4 NA NA NA NA ...</span></span>
<span id="cb8-9"><a href="#cb8-9"></a><span class="co">#&gt;  $ BMXWT   : num  137.6 55.2 47.9 70 103.1 ...</span></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co">#&gt;  $ BMXHT   : num  164 163 161 184 182 ...</span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="co">#&gt;  $ BMXBMI  : num  50.9 20.8 18.4 20.6 31.3 ...</span></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="co">#&gt;  $ SDDSRVYR: num  3 3 3 3 3 3 3 3 3 3 ...</span></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="co">#&gt;  $ RIAGENDR: num  1 2 2 1 1 2 1 1 2 1 ...</span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="co">#&gt;  $ RIDAGEYR: num  19 16 14 17 55 52 0 63 13 3 ...</span></span>
<span id="cb8-15"><a href="#cb8-15"></a><span class="co">#&gt;  $ RIDAGEMN: num  232 203 172 208 671 633 3 765 163 42 ...</span></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="co">#&gt;  $ RIDAGEEX: num  233 205 172 209 672 634 4 766 164 42 ...</span></span>
<span id="cb8-17"><a href="#cb8-17"></a><span class="co">#&gt;  $ RIDRETH1: num  4 4 3 4 3 3 1 4 4 4 ...</span></span>
<span id="cb8-18"><a href="#cb8-18"></a><span class="co">#&gt;  $ DMDEDUC2: num  NA NA NA NA 3 4 NA 3 NA NA ...</span></span>
<span id="cb8-19"><a href="#cb8-19"></a><span class="co">#&gt;  $ WTINT2YR: num  5512 5422 39764 5599 97594 ...</span></span>
<span id="cb8-20"><a href="#cb8-20"></a><span class="co">#&gt;  $ WTMEC2YR: num  5825 5564 40591 5697 97732 ...</span></span>
<span id="cb8-21"><a href="#cb8-21"></a><span class="co">#&gt;  $ SDMVPSU : num  2 1 2 1 2 1 2 2 1 1 ...</span></span>
<span id="cb8-22"><a href="#cb8-22"></a><span class="co">#&gt;  $ SDMVSTRA: num  39 41 35 32 31 29 40 33 37 33 ...</span></span>
<span id="cb8-23"><a href="#cb8-23"></a><span class="co">#&gt;  $ DIQ010  : num  2 2 2 2 2 2 NA 2 2 2 ...</span></span>
<span id="cb8-24"><a href="#cb8-24"></a><span class="co">#&gt;  $ MCQ160B : num  NA NA NA NA 2 2 NA 2 NA NA ...</span></span>
<span id="cb8-25"><a href="#cb8-25"></a><span class="co">#&gt;  $ MCQ160C : num  NA NA NA NA 2 2 NA 2 NA NA ...</span></span>
<span id="cb8-26"><a href="#cb8-26"></a><span class="co">#&gt;  $ MCQ160F : num  NA NA NA NA 2 2 NA 2 NA NA ...</span></span>
<span id="cb8-27"><a href="#cb8-27"></a><span class="co">#&gt;  $ MCQ220  : num  NA NA NA NA 2 2 NA 2 NA NA ...</span></span>
<span id="cb8-28"><a href="#cb8-28"></a><span class="co">#&gt;  $ PFQ049  : num  NA NA NA NA 2 1 NA 2 NA NA ...</span></span>
<span id="cb8-29"><a href="#cb8-29"></a><span class="co">#&gt;  $ PFQ054  : num  NA NA NA NA 2 2 NA 2 NA NA ...</span></span>
<span id="cb8-30"><a href="#cb8-30"></a><span class="co">#&gt;  $ PFQ057  : num  NA NA NA NA 2 2 NA 2 NA NA ...</span></span>
<span id="cb8-31"><a href="#cb8-31"></a><span class="co">#&gt;  $ PFQ059  : num  NA NA NA NA 2 NA NA 2 NA NA ...</span></span>
<span id="cb8-32"><a href="#cb8-32"></a><span class="co">#&gt;  $ PFQ061B : num  NA NA NA NA NA 1 NA 5 NA NA ...</span></span>
<span id="cb8-33"><a href="#cb8-33"></a><span class="co">#&gt;  $ PFQ061C : num  NA NA NA NA NA 1 NA 1 NA NA ...</span></span>
<span id="cb8-34"><a href="#cb8-34"></a><span class="co">#&gt;  $ SMQ020  : num  NA NA NA NA 2 1 NA 1 NA NA ...</span></span>
<span id="cb8-35"><a href="#cb8-35"></a><span class="co">#&gt;  $ SMD030  : num  NA NA NA NA NA 16 NA 13 NA NA ...</span></span>
<span id="cb8-36"><a href="#cb8-36"></a><span class="co">#&gt;  $ SMQ040  : num  NA NA NA NA NA 1 NA 1 NA NA ...</span></span></code></pre></div>
<p>Many variables of interest are represented by a single NHANES question. For example, “Gender” can be derived entirely from the NHANES variable “RIAGENDR”. In order to create the “Gender” variable, we need to look at the NHANES demographic data codebook, available at <a href="https://wwwn.cdc.gov/Nchs/Nhanes/2003-2004/DEMO_C.htm" class="uri">https://wwwn.cdc.gov/Nchs/Nhanes/2003-2004/DEMO_C.htm</a>. Below, we show how to create the variables included in <strong>Covariate_C</strong> and <strong>Covariate_D</strong> which can be derived from a single NHANES question.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>Covariate_C<span class="op">$</span>Race &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_C<span class="op">$</span>RIDRETH1, <span class="dt">levels=</span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Mexican American"</span>, <span class="st">"Other Hispanic"</span>, <span class="st">"White"</span>, <span class="st">"Black"</span>, <span class="st">"Other"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a>Covariate_D<span class="op">$</span>Race &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_D<span class="op">$</span>RIDRETH1, <span class="dt">levels=</span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Mexican American"</span>, <span class="st">"Other Hispanic"</span>, <span class="st">"White"</span>, <span class="st">"Black"</span>, <span class="st">"Other"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-3"><a href="#cb9-3"></a>Covariate_C<span class="op">$</span>Race &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_C<span class="op">$</span>Race, <span class="dt">ref=</span><span class="st">"White"</span>)</span>
<span id="cb9-4"><a href="#cb9-4"></a>Covariate_D<span class="op">$</span>Race &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_D<span class="op">$</span>Race, <span class="dt">ref=</span><span class="st">"White"</span>)</span>
<span id="cb9-5"><a href="#cb9-5"></a></span>
<span id="cb9-6"><a href="#cb9-6"></a></span>
<span id="cb9-7"><a href="#cb9-7"></a>Covariate_C<span class="op">$</span>Gender &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_C<span class="op">$</span>RIAGENDR, <span class="dt">levels=</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Male"</span>,<span class="st">"Female"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-8"><a href="#cb9-8"></a>Covariate_D<span class="op">$</span>Gender &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_D<span class="op">$</span>RIAGENDR, <span class="dt">levels=</span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Male"</span>,<span class="st">"Female"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-9"><a href="#cb9-9"></a></span>
<span id="cb9-10"><a href="#cb9-10"></a>Covariate_C<span class="op">$</span>Diabetes &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_C<span class="op">$</span>DIQ010, <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">9</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>,<span class="st">"Borderline"</span>,<span class="st">"Refused"</span>,<span class="st">"Don't know"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-11"><a href="#cb9-11"></a>Covariate_D<span class="op">$</span>Diabetes &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_D<span class="op">$</span>DIQ010, <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">7</span>,<span class="dv">9</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>,<span class="st">"Borderline"</span>,<span class="st">"Refused"</span>,<span class="st">"Don't know"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-12"><a href="#cb9-12"></a>Covariate_C<span class="op">$</span>Diabetes &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_C<span class="op">$</span>Diabetes, <span class="dt">ref=</span><span class="st">"No"</span>)</span>
<span id="cb9-13"><a href="#cb9-13"></a>Covariate_D<span class="op">$</span>Diabetes &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_D<span class="op">$</span>Diabetes, <span class="dt">ref=</span><span class="st">"No"</span>)</span>
<span id="cb9-14"><a href="#cb9-14"></a></span>
<span id="cb9-15"><a href="#cb9-15"></a></span>
<span id="cb9-16"><a href="#cb9-16"></a>Covariate_C<span class="op">$</span>CHF &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_C<span class="op">$</span>MCQ160B, <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">7</span>,<span class="dv">9</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>,<span class="st">"Refused"</span>,<span class="st">"Don't know"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-17"><a href="#cb9-17"></a>Covariate_D<span class="op">$</span>CHF &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_D<span class="op">$</span>MCQ160B, <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">7</span>,<span class="dv">9</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>,<span class="st">"Refused"</span>,<span class="st">"Don't know"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-18"><a href="#cb9-18"></a>Covariate_C<span class="op">$</span>CHF &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_C<span class="op">$</span>CHF, <span class="dt">ref=</span><span class="st">"No"</span>)</span>
<span id="cb9-19"><a href="#cb9-19"></a>Covariate_D<span class="op">$</span>CHF &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_D<span class="op">$</span>CHF, <span class="dt">ref=</span><span class="st">"No"</span>)</span>
<span id="cb9-20"><a href="#cb9-20"></a></span>
<span id="cb9-21"><a href="#cb9-21"></a></span>
<span id="cb9-22"><a href="#cb9-22"></a>Covariate_C<span class="op">$</span>CHD &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_C<span class="op">$</span>MCQ160C, <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">7</span>,<span class="dv">9</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>,<span class="st">"Refused"</span>,<span class="st">"Don't know"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-23"><a href="#cb9-23"></a>Covariate_D<span class="op">$</span>CHD &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_D<span class="op">$</span>MCQ160C, <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">7</span>,<span class="dv">9</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>,<span class="st">"Refused"</span>,<span class="st">"Don't know"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-24"><a href="#cb9-24"></a>Covariate_C<span class="op">$</span>CHD &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_C<span class="op">$</span>CHD, <span class="dt">ref=</span><span class="st">"No"</span>)</span>
<span id="cb9-25"><a href="#cb9-25"></a>Covariate_D<span class="op">$</span>CHD &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_D<span class="op">$</span>CHD, <span class="dt">ref=</span><span class="st">"No"</span>)</span>
<span id="cb9-26"><a href="#cb9-26"></a></span>
<span id="cb9-27"><a href="#cb9-27"></a>Covariate_C<span class="op">$</span>Cancer &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_C<span class="op">$</span>MCQ220, <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">7</span>,<span class="dv">9</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>,<span class="st">"Refused"</span>,<span class="st">"Don't know"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-28"><a href="#cb9-28"></a>Covariate_D<span class="op">$</span>Cancer &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_D<span class="op">$</span>MCQ220, <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">7</span>,<span class="dv">9</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>,<span class="st">"Refused"</span>,<span class="st">"Don't know"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-29"><a href="#cb9-29"></a>Covariate_C<span class="op">$</span>Cancer &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_C<span class="op">$</span>Cancer, <span class="dt">ref=</span><span class="st">"No"</span>)</span>
<span id="cb9-30"><a href="#cb9-30"></a>Covariate_D<span class="op">$</span>Cancer &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_D<span class="op">$</span>Cancer, <span class="dt">ref=</span><span class="st">"No"</span>)</span>
<span id="cb9-31"><a href="#cb9-31"></a></span>
<span id="cb9-32"><a href="#cb9-32"></a></span>
<span id="cb9-33"><a href="#cb9-33"></a>Covariate_C<span class="op">$</span>Stroke &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_C<span class="op">$</span>MCQ160F, <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">7</span>,<span class="dv">9</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>,<span class="st">"Refused"</span>,<span class="st">"Don't know"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-34"><a href="#cb9-34"></a>Covariate_D<span class="op">$</span>Stroke &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_D<span class="op">$</span>MCQ160F, <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">7</span>,<span class="dv">9</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>,<span class="st">"Refused"</span>,<span class="st">"Don't know"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-35"><a href="#cb9-35"></a>Covariate_C<span class="op">$</span>Cancer &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_C<span class="op">$</span>Cancer, <span class="dt">ref=</span><span class="st">"No"</span>)</span>
<span id="cb9-36"><a href="#cb9-36"></a>Covariate_D<span class="op">$</span>Cancer &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_D<span class="op">$</span>Cancer, <span class="dt">ref=</span><span class="st">"No"</span>)</span>
<span id="cb9-37"><a href="#cb9-37"></a></span>
<span id="cb9-38"><a href="#cb9-38"></a></span>
<span id="cb9-39"><a href="#cb9-39"></a>Covariate_C<span class="op">$</span>EducationAdult &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_C<span class="op">$</span>DMDEDUC2, <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">9</span>),</span>
<span id="cb9-40"><a href="#cb9-40"></a>                                     <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Less than 9th grade"</span>,<span class="st">"9-11th grade"</span>,<span class="st">"High school grad/GED or equivalent"</span>,</span>
<span id="cb9-41"><a href="#cb9-41"></a>                                              <span class="st">"Some College or AA degree"</span>, <span class="st">"College graduate or above"</span>,<span class="st">"Refused"</span>,<span class="st">"Don't know"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-42"><a href="#cb9-42"></a>Covariate_D<span class="op">$</span>EducationAdult &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_D<span class="op">$</span>DMDEDUC2, <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">9</span>),</span>
<span id="cb9-43"><a href="#cb9-43"></a>                                     <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Less than 9th grade"</span>,<span class="st">"9-11th grade"</span>,<span class="st">"High school grad/GED or equivalent"</span>,</span>
<span id="cb9-44"><a href="#cb9-44"></a>                                              <span class="st">"Some College or AA degree"</span>, <span class="st">"College graduate or above"</span>,<span class="st">"Refused"</span>,<span class="st">"Don't know"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb9-45"><a href="#cb9-45"></a>Covariate_C<span class="op">$</span>BMI &lt;-<span class="st"> </span>Covariate_C<span class="op">$</span>BMXBMI</span>
<span id="cb9-46"><a href="#cb9-46"></a>Covariate_D<span class="op">$</span>BMI &lt;-<span class="st"> </span>Covariate_D<span class="op">$</span>BMXBMI</span>
<span id="cb9-47"><a href="#cb9-47"></a></span>
<span id="cb9-48"><a href="#cb9-48"></a>Covariate_C<span class="op">$</span>BMI_cat &lt;-<span class="kw"><a href="https://rdrr.io/r/base/cut.html">cut</a></span>(Covariate_C<span class="op">$</span>BMI, <span class="dt">breaks=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="fl">18.5</span>, <span class="dv">25</span>, <span class="dv">30</span>, <span class="ot">Inf</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Underweight"</span>,<span class="st">"Normal"</span>,<span class="st">"Overweight"</span>,<span class="st">"Obese"</span>))</span>
<span id="cb9-49"><a href="#cb9-49"></a>Covariate_D<span class="op">$</span>BMI_cat &lt;-<span class="kw"><a href="https://rdrr.io/r/base/cut.html">cut</a></span>(Covariate_D<span class="op">$</span>BMI, <span class="dt">breaks=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="fl">18.5</span>, <span class="dv">25</span>, <span class="dv">30</span>, <span class="ot">Inf</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Underweight"</span>,<span class="st">"Normal"</span>,<span class="st">"Overweight"</span>,<span class="st">"Obese"</span>))</span>
<span id="cb9-50"><a href="#cb9-50"></a>Covariate_C<span class="op">$</span>BMI_cat &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_C<span class="op">$</span>BMI_cat, <span class="dt">ref=</span><span class="st">"Normal"</span>)</span>
<span id="cb9-51"><a href="#cb9-51"></a>Covariate_D<span class="op">$</span>BMI_cat &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_D<span class="op">$</span>BMI_cat, <span class="dt">ref=</span><span class="st">"Normal"</span>)</span></code></pre></div>
<p>Observe that there are some variables which we applied the <em>relevel()</em> function to. The <em>relevel()</em> function allows us to set the level of the factor variable which is considered as the “baseline”. This is particularly useful when you intend to use factor variables in a regression.</p>
<p>Unlike the variables derived above, some variables (alcohol consumption, cigarette smoking, mobility problem, etc) require integrating the information from multiple variables (multiple questionnaire items). Often, creating variables derived from more than one questionnaire item require choices involving how the definition of said variables. Moreover, creating these variables requires careful attention to “skip patterns” in the relevant questionnaires in order to not accidentally mark data as “missing” when there is really an implied value based on their responses to other questions.</p>
<div id="creating-a-variable-for-cigarette-smoking" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-a-variable-for-cigarette-smoking" class="anchor"></a>Creating a variable for cigarette smoking</h3>
<p>The NHANES 2003-2004 and 2005-2006 waves ask a number of questions about smoking. A very simple way to classify individuals based on their smoking history is:</p>
<ul>
<li>Never smoker</li>
<li>Former smoker</li>
<li>Current smoker</li>
</ul>
<p>However, NHANES does not ask a question that corresponds exactly to this classification. Instead, the first question on the smoking questionnaire for these two waves is: “Have you smoked at least 100 cigarettes in your entire life”? If the answer to this question is “no”, “refused”, or “don’t know”, then the participant is asked no more questions about their cigarette smoking history. If the answer to this question is “yes” then they’re asked at least 2 more questions on smoking history.</p>
<p>There are many possible ways to categorize individuals into never, former, or current smokers using the smoking questionnaire from NHANES 2003-2004/2005-2006. In the <strong>Covariate_C</strong> and <strong>Covariate_D</strong> data sets, we only consider individuals’ responses to the questions:</p>
<ol style="list-style-type: decimal">
<li>SMQ020: “Have you smoked at least 100 cigarettes in your entire life”</li>
<li>SMQ040: “Do you now smoke cigarettes”</li>
</ol>
<p>If an individual responded “No” to question 1 above, we classify them as Never smokers. If an individual responds “Yes” to question 1 and “Not at all” to question 2, we classify them as former smokers. If an individual response “Yes” to question 1 and either “Every day” or “Some days”. Any other combination of responses is considered missing data.</p>
<p>The code to create our cigarette smoking variable is then</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co">## temporarily assign the SmokeCigs variable as individuals' </span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="co">## response to SMQ040</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>Covariate_C<span class="op">$</span>SmokeCigs &lt;-Covariate_C<span class="op">$</span>SMQ040</span>
<span id="cb10-4"><a href="#cb10-4"></a>Covariate_D<span class="op">$</span>SmokeCigs &lt;-Covariate_D<span class="op">$</span>SMQ040</span>
<span id="cb10-5"><a href="#cb10-5"></a></span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="co">## re-codes individuals who responded "No" to "Ever smoked 100 cigarettes in your life" (SMQ020) </span></span>
<span id="cb10-7"><a href="#cb10-7"></a><span class="co">## as -999 instead of missing (since these individuals were never asked question SMQ040)</span></span>
<span id="cb10-8"><a href="#cb10-8"></a>Covariate_C<span class="op">$</span>SmokeCigs[Covariate_C<span class="op">$</span>SMQ020 <span class="op">==</span><span class="st"> </span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="dv">-999</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>Covariate_D<span class="op">$</span>SmokeCigs[Covariate_D<span class="op">$</span>SMQ020 <span class="op">==</span><span class="st"> </span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="dv">-999</span></span>
<span id="cb10-10"><a href="#cb10-10"></a></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="co">## re-code individuals who answered "some days" to SMQ040 ("do you now smoke cigarettes")</span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="co">## as "1". These individuals are considered current smokers by our definition</span></span>
<span id="cb10-13"><a href="#cb10-13"></a>Covariate_C<span class="op">$</span>SmokeCigs[Covariate_C<span class="op">$</span>SmokeCigs <span class="op">==</span><span class="st"> </span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb10-14"><a href="#cb10-14"></a>Covariate_D<span class="op">$</span>SmokeCigs[Covariate_D<span class="op">$</span>SmokeCigs <span class="op">==</span><span class="st"> </span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb10-15"><a href="#cb10-15"></a></span>
<span id="cb10-16"><a href="#cb10-16"></a><span class="co">## finally, create the factor variable based on our re-coding </span></span>
<span id="cb10-17"><a href="#cb10-17"></a>Covariate_C<span class="op">$</span>SmokeCigs &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_C<span class="op">$</span>SmokeCigs, <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="dv">999</span>, <span class="dv">3</span>, <span class="dv">1</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Never"</span>, <span class="st">"Former"</span>, <span class="st">"Current"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb10-18"><a href="#cb10-18"></a>Covariate_D<span class="op">$</span>SmokeCigs &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(Covariate_D<span class="op">$</span>SmokeCigs, <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="dv">999</span>, <span class="dv">3</span>, <span class="dv">1</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Never"</span>, <span class="st">"Former"</span>, <span class="st">"Current"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span></code></pre></div>
</div>
<div id="creating-a-variable-for-alcohol-consumption" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-a-variable-for-alcohol-consumption" class="anchor"></a>Creating a variable for alcohol consumption</h3>
<p>The NHANES 2003-2004 and 2005-2006 waves ask a number of questions about alcohol consumption. Similar to how we classified individuals into smoking categories, it’s common to classify individuals as being one of</p>
<ul>
<li>Non drinker</li>
<li>Moderate drinker</li>
<li>Heavy drinker</li>
</ul>
<p>The CDC provides a (gender specific) definition for moderate drinker versus heavy drinker based on the amount of alcohol consumed, on average, per day AND whether or not an individual engages in binge drinking. However, as of writing, the NHANES 2003-2006 data do not contain data on binge drinking as used in the CDC’s definition of heavy drinker. As such, we use individuals’ self-reported number of drinks per week to classify individuals.</p>
<p>We define non drinkers as anyone who reported never drinking 12 or more drinks over the course of their entire life (ALQ101), or over the course of any year (ALQ110). We defined former drinkers as anyone who indicated that they had at least 12 drinks over the course of any one year, but report drinking no alcohol in the past 12 months. Moderate drinkers are women and men who report drinking, on average, 7 and 14 fewer drinks per week, respectively. Anyone who does not have sufficient data to identify them as belonging to one of these groups was considered to have missing data.</p>
<p>There is a slight complication in that the questionnaire is structured such that individuals report how often they drank alcohol over the past year (ALQ120Q) among individuals who reported drinking alcohol, the number of days they drank per unit time (ALQ120U: week, month, year), and then how many drinks they did drink on those days where they consumed alcohol (ALQ130). The answers to these three questions need to be considered jointly in order to calculate a variable corresponding to the “average number of alcoholic drinks drank per week over the last 12 months” variable. An additional complication is that NHANES changed how refused/missing data were coded for the variable ALQ130 (# of drinks on those days that alcohol was drunk) this is addressed in the code below.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co">## classifies don't know/refused as missing</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>Covariate_C<span class="op">$</span>ALQ101[Covariate_C<span class="op">$</span>ALQ101 <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">7</span>,<span class="dv">9</span>)] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>Covariate_D<span class="op">$</span>ALQ101[Covariate_D<span class="op">$</span>ALQ101 <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">7</span>,<span class="dv">9</span>)] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb11-4"><a href="#cb11-4"></a></span>
<span id="cb11-5"><a href="#cb11-5"></a>Covariate_C<span class="op">$</span>ALQ110[Covariate_C<span class="op">$</span>ALQ110 <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">7</span>,<span class="dv">9</span>)] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>Covariate_D<span class="op">$</span>ALQ110[Covariate_D<span class="op">$</span>ALQ110 <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">7</span>,<span class="dv">9</span>)] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb11-7"><a href="#cb11-7"></a></span>
<span id="cb11-8"><a href="#cb11-8"></a><span class="co">## get a factor variable which corresponds to "have you ever in your life had 12 drinks total over the course of a year?"</span></span>
<span id="cb11-9"><a href="#cb11-9"></a>Covariate_C<span class="op">$</span>Alcohol_Ever &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(Covariate_C<span class="op">$</span>ALQ101 <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">|</span><span class="st"> </span>Covariate_C<span class="op">$</span>ALQ110 <span class="op">==</span><span class="st"> </span><span class="dv">1</span>), <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb11-10"><a href="#cb11-10"></a>Covariate_D<span class="op">$</span>Alcohol_Ever &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(Covariate_D<span class="op">$</span>ALQ101 <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">|</span><span class="st"> </span>Covariate_D<span class="op">$</span>ALQ110 <span class="op">==</span><span class="st"> </span><span class="dv">1</span>), <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Yes"</span>,<span class="st">"No"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb11-11"><a href="#cb11-11"></a></span>
<span id="cb11-12"><a href="#cb11-12"></a><span class="co">## re-code "how often drink alcohol over past 12 mos" = refused (777) and don't know (999) as missing</span></span>
<span id="cb11-13"><a href="#cb11-13"></a>Covariate_C<span class="op">$</span>ALQ120Q[Covariate_C<span class="op">$</span>ALQ120Q <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">777</span>,<span class="dv">999</span>)] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb11-14"><a href="#cb11-14"></a>Covariate_D<span class="op">$</span>ALQ120Q[Covariate_D<span class="op">$</span>ALQ120Q <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">777</span>,<span class="dv">999</span>)] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb11-15"><a href="#cb11-15"></a></span>
<span id="cb11-16"><a href="#cb11-16"></a><span class="co">## re code # days drank alcohol units of refused/don't know as missing ()</span></span>
<span id="cb11-17"><a href="#cb11-17"></a><span class="co">## note: there are no observed values of 7/9 in these variables, but they are options in the survey</span></span>
<span id="cb11-18"><a href="#cb11-18"></a>Covariate_C<span class="op">$</span>ALQ120U[Covariate_C<span class="op">$</span>ALQ120U <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">7</span>,<span class="dv">9</span>)] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb11-19"><a href="#cb11-19"></a>Covariate_D<span class="op">$</span>ALQ120U[Covariate_D<span class="op">$</span>ALQ120U <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">7</span>,<span class="dv">9</span>)] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb11-20"><a href="#cb11-20"></a></span>
<span id="cb11-21"><a href="#cb11-21"></a><span class="co">## re code # of drinks on those days that alcohol was drunk</span></span>
<span id="cb11-22"><a href="#cb11-22"></a><span class="co">## to be NA where the answer was "refused" or "dont know"</span></span>
<span id="cb11-23"><a href="#cb11-23"></a><span class="co">## note they changed the coding between 2003-2004 and 2005 and 2006 waves from 77/99 to 777/999</span></span>
<span id="cb11-24"><a href="#cb11-24"></a>Covariate_C<span class="op">$</span>ALQ130[Covariate_C<span class="op">$</span>ALQ130 <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">77</span>,<span class="dv">99</span>)] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb11-25"><a href="#cb11-25"></a>Covariate_D<span class="op">$</span>ALQ130[Covariate_D<span class="op">$</span>ALQ130 <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">777</span>,<span class="dv">999</span>)] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb11-26"><a href="#cb11-26"></a></span>
<span id="cb11-27"><a href="#cb11-27"></a></span>
<span id="cb11-28"><a href="#cb11-28"></a><span class="co">## get number of drinks per week for all individuals</span></span>
<span id="cb11-29"><a href="#cb11-29"></a>multiplier &lt;-<span class="st"> </span><span class="dv">7</span><span class="op">*</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">7</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">30</span>, <span class="dv">1</span><span class="op">/</span><span class="dv">365</span>)</span>
<span id="cb11-30"><a href="#cb11-30"></a></span>
<span id="cb11-31"><a href="#cb11-31"></a><span class="co">##                           (#days drank alcohol / unit time) * (unit time / week)                *  (drinks / day)     = drinks/week</span></span>
<span id="cb11-32"><a href="#cb11-32"></a>Covariate_C<span class="op">$</span>DrinksPerWeek &lt;-<span class="st">        </span>Covariate_C<span class="op">$</span>ALQ120Q        <span class="op">*</span><span class="st"> </span>(multiplier[Covariate_C<span class="op">$</span>ALQ120U]) <span class="op">*</span><span class="st"> </span>Covariate_C<span class="op">$</span>ALQ130</span>
<span id="cb11-33"><a href="#cb11-33"></a>Covariate_D<span class="op">$</span>DrinksPerWeek &lt;-<span class="st">        </span>Covariate_D<span class="op">$</span>ALQ120Q        <span class="op">*</span><span class="st"> </span>(multiplier[Covariate_D<span class="op">$</span>ALQ120U]) <span class="op">*</span><span class="st"> </span>Covariate_D<span class="op">$</span>ALQ130</span>
<span id="cb11-34"><a href="#cb11-34"></a></span>
<span id="cb11-35"><a href="#cb11-35"></a><span class="co">## recode individuals who are never drinkers OR non-drinkers  as drinking 0 drinks per week</span></span>
<span id="cb11-36"><a href="#cb11-36"></a>Covariate_C<span class="op">$</span>DrinksPerWeek[Covariate_C<span class="op">$</span>Alcohol_Ever <span class="op">==</span><span class="st"> "No"</span>] &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb11-37"><a href="#cb11-37"></a>Covariate_D<span class="op">$</span>DrinksPerWeek[Covariate_D<span class="op">$</span>Alcohol_Ever <span class="op">==</span><span class="st"> "No"</span>] &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb11-38"><a href="#cb11-38"></a></span>
<span id="cb11-39"><a href="#cb11-39"></a>Covariate_C<span class="op">$</span>DrinksPerWeek[Covariate_C<span class="op">$</span>ALQ120Q <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb11-40"><a href="#cb11-40"></a>Covariate_D<span class="op">$</span>DrinksPerWeek[Covariate_D<span class="op">$</span>ALQ120Q <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] &lt;-<span class="st"> </span><span class="dv">0</span></span>
<span id="cb11-41"><a href="#cb11-41"></a></span>
<span id="cb11-42"><a href="#cb11-42"></a></span>
<span id="cb11-43"><a href="#cb11-43"></a><span class="co">## classify individuals as "non-drinker","moderate","heavy" using gender specific CDC thresholds of</span></span>
<span id="cb11-44"><a href="#cb11-44"></a><span class="co">##  no more than 7 drinks/week for women, and no more than  14 drinks per week for men.</span></span>
<span id="cb11-45"><a href="#cb11-45"></a><span class="co">##  note we do not have</span></span>
<span id="cb11-46"><a href="#cb11-46"></a>cutoff &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">14</span>,<span class="dv">7</span>)</span>
<span id="cb11-47"><a href="#cb11-47"></a>Covariate_C<span class="op">$</span>DrinkStatus &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cut.html">cut</a></span>(Covariate_C<span class="op">$</span>DrinksPerWeek <span class="op">/</span><span class="st"> </span>cutoff[Covariate_C<span class="op">$</span>RIAGENDR], <span class="dt">breaks=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="ot">Inf</span>), </span>
<span id="cb11-48"><a href="#cb11-48"></a>                               <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Non-Drinker"</span>,<span class="st">"Moderate Drinker"</span>, <span class="st">"Heavy Drinker"</span>))</span>
<span id="cb11-49"><a href="#cb11-49"></a>Covariate_D<span class="op">$</span>DrinkStatus &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cut.html">cut</a></span>(Covariate_D<span class="op">$</span>DrinksPerWeek <span class="op">/</span><span class="st"> </span>cutoff[Covariate_D<span class="op">$</span>RIAGENDR], <span class="dt">breaks=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="op">-</span><span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="ot">Inf</span>), </span>
<span id="cb11-50"><a href="#cb11-50"></a>                               <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Non-Drinker"</span>,<span class="st">"Moderate Drinker"</span>, <span class="st">"Heavy Drinker"</span>))</span>
<span id="cb11-51"><a href="#cb11-51"></a></span>
<span id="cb11-52"><a href="#cb11-52"></a><span class="co">## re-level the factor variable to have the baseline be moderate drinkers</span></span>
<span id="cb11-53"><a href="#cb11-53"></a>Covariate_C<span class="op">$</span>DrinkStatus &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_C<span class="op">$</span>DrinkStatus, <span class="dt">ref=</span><span class="st">"Moderate Drinker"</span>)</span>
<span id="cb11-54"><a href="#cb11-54"></a>Covariate_D<span class="op">$</span>DrinkStatus &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span>(Covariate_D<span class="op">$</span>DrinkStatus, <span class="dt">ref=</span><span class="st">"Moderate Drinker"</span>)</span></code></pre></div>
</div>
<div id="creating-a-variable-for-mobility-problem" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-a-variable-for-mobility-problem" class="anchor"></a>Creating a variable for mobility problem</h3>
<p>We define participants as reporting a mobility problem if they report any of:</p>
<ol style="list-style-type: decimal">
<li>Difficulty walking a quarter mile (PFQ061B)</li>
<li>Difficulty climbing 10 stairs (PFQ061C)</li>
<li>Use of any special equipment to walk (PFQ054)</li>
</ol>
<p>The skip pattern of the physical function questionnaire is crucial to correctly creating this variable. That is, if individuals report needing special equipment to walk, they are not asked about their difficulty climbing stairs or walking a quarter mile. In addition, individuals are not asked about difficulty walking or climbing stairs if they are 59 or younger according the variable RIDAGEYR (<strong>not</strong> RIDAGEMN which measures age at interview) and indicate they have no limitations that keep them from working (PFQ049), no memory problems (PFQ057), and no limitations arising from a mental, emotional, or physical problem (PFQ059). We consider these individuals to have no mobility problem.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>Covariate_C<span class="op">$</span>Difficulty_Walking &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(Covariate_C<span class="op">$</span>PFQ061B<span class="op">==</span><span class="dv">1</span>), <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"No Difficulty"</span>,<span class="st">"Any Difficulty"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb12-2"><a href="#cb12-2"></a>Covariate_D<span class="op">$</span>Difficulty_Walking &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(Covariate_D<span class="op">$</span>PFQ061B<span class="op">==</span><span class="dv">1</span>), <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"No Difficulty"</span>,<span class="st">"Any Difficulty"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a>Covariate_C<span class="op">$</span>Difficulty_Stairs &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(Covariate_C<span class="op">$</span>PFQ061C<span class="op">==</span><span class="dv">1</span>), <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"No Difficulty"</span>,<span class="st">"Any Difficulty"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb12-5"><a href="#cb12-5"></a>Covariate_D<span class="op">$</span>Difficulty_Stairs &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(Covariate_D<span class="op">$</span>PFQ061C<span class="op">==</span><span class="dv">1</span>), <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"No Difficulty"</span>,<span class="st">"Any Difficulty"</span>), <span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb12-6"><a href="#cb12-6"></a></span>
<span id="cb12-7"><a href="#cb12-7"></a><span class="co">## label anyone who requires special equipment to walk as "any difficulty"</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>inx_sp_equip_C &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/which.html">which</a></span>(Covariate_C<span class="op">$</span>PFQ054 <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb12-9"><a href="#cb12-9"></a>inx_sp_equip_D &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/which.html">which</a></span>(Covariate_D<span class="op">$</span>PFQ054 <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)</span>
<span id="cb12-10"><a href="#cb12-10"></a></span>
<span id="cb12-11"><a href="#cb12-11"></a>Covariate_C<span class="op">$</span>Difficulty_Walking[inx_sp_equip_C] &lt;-<span class="st"> "Any Difficulty"</span></span>
<span id="cb12-12"><a href="#cb12-12"></a>Covariate_D<span class="op">$</span>Difficulty_Walking[inx_sp_equip_D] &lt;-<span class="st"> "Any Difficulty"</span></span>
<span id="cb12-13"><a href="#cb12-13"></a></span>
<span id="cb12-14"><a href="#cb12-14"></a>Covariate_C<span class="op">$</span>Difficulty_Stairs[inx_sp_equip_C] &lt;-<span class="st"> "Any Difficulty"</span></span>
<span id="cb12-15"><a href="#cb12-15"></a>Covariate_D<span class="op">$</span>Difficulty_Stairs[inx_sp_equip_D] &lt;-<span class="st"> "Any Difficulty"</span></span>
<span id="cb12-16"><a href="#cb12-16"></a><span class="kw"><a href="https://rdrr.io/r/base/rm.html">rm</a></span>(<span class="dt">list=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"inx_sp_equip_C"</span>,<span class="st">"inx_sp_equip_D"</span>))</span>
<span id="cb12-17"><a href="#cb12-17"></a></span>
<span id="cb12-18"><a href="#cb12-18"></a></span>
<span id="cb12-19"><a href="#cb12-19"></a><span class="co"># label anyone 59 and younger at interview who responds no to PFQ049, PFQ057, PFQ059 as "No difficulty"</span></span>
<span id="cb12-20"><a href="#cb12-20"></a>inx_good_fn_C &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/which.html">which</a></span>(Covariate_C<span class="op">$</span>PFQ049 <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">&amp;</span><span class="st"> </span>Covariate_C<span class="op">$</span>PFQ057 <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">&amp;</span><span class="st"> </span>Covariate_C<span class="op">$</span>PFQ059 <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">&amp;</span><span class="st"> </span>Covariate_C<span class="op">$</span>RIDAGEYR <span class="op">&lt;=</span><span class="st"> </span><span class="dv">59</span>)</span>
<span id="cb12-21"><a href="#cb12-21"></a>inx_good_fn_D &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/which.html">which</a></span>(Covariate_D<span class="op">$</span>PFQ049 <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">&amp;</span><span class="st"> </span>Covariate_D<span class="op">$</span>PFQ057 <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">&amp;</span><span class="st"> </span>Covariate_D<span class="op">$</span>PFQ059 <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">&amp;</span><span class="st"> </span>Covariate_D<span class="op">$</span>RIDAGEYR <span class="op">&lt;=</span><span class="st"> </span><span class="dv">59</span>)</span>
<span id="cb12-22"><a href="#cb12-22"></a></span>
<span id="cb12-23"><a href="#cb12-23"></a>Covariate_C<span class="op">$</span>Difficulty_Walking[inx_good_fn_C] &lt;-<span class="st"> "No Difficulty"</span></span>
<span id="cb12-24"><a href="#cb12-24"></a>Covariate_D<span class="op">$</span>Difficulty_Walking[inx_good_fn_D] &lt;-<span class="st"> "No Difficulty"</span></span>
<span id="cb12-25"><a href="#cb12-25"></a></span>
<span id="cb12-26"><a href="#cb12-26"></a>Covariate_C<span class="op">$</span>Difficulty_Stairs[inx_good_fn_C] &lt;-<span class="st"> "No Difficulty"</span></span>
<span id="cb12-27"><a href="#cb12-27"></a>Covariate_D<span class="op">$</span>Difficulty_Stairs[inx_good_fn_D] &lt;-<span class="st"> "No Difficulty"</span></span>
<span id="cb12-28"><a href="#cb12-28"></a></span>
<span id="cb12-29"><a href="#cb12-29"></a>Covariate_C<span class="op">$</span>MobilityProblem &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(Covariate_C<span class="op">$</span>Difficulty_Stairs <span class="op">==</span><span class="st"> "Any Difficulty"</span> <span class="op">|</span><span class="st"> </span>Covariate_C<span class="op">$</span>Difficulty_Walking <span class="op">==</span><span class="st"> "Any Difficulty"</span>),</span>
<span id="cb12-30"><a href="#cb12-30"></a>                                      <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"No Difficulty"</span>,<span class="st">"Any Difficulty"</span>),<span class="dt">ordered=</span><span class="ot">FALSE</span>)</span>
<span id="cb12-31"><a href="#cb12-31"></a>Covariate_D<span class="op">$</span>MobilityProblem &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/factor.html">factor</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(Covariate_D<span class="op">$</span>Difficulty_Stairs <span class="op">==</span><span class="st"> "Any Difficulty"</span> <span class="op">|</span><span class="st"> </span>Covariate_D<span class="op">$</span>Difficulty_Walking <span class="op">==</span><span class="st"> "Any Difficulty"</span>),</span>
<span id="cb12-32"><a href="#cb12-32"></a>                                      <span class="dt">levels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="dt">labels=</span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"No Difficulty"</span>,<span class="st">"Any Difficulty"</span>),<span class="dt">ordered=</span><span class="ot">FALSE</span>)</span></code></pre></div>
</div>
<div id="saving-the-demographic-lifestyle-and-comorbidity-data" class="section level3">
<h3 class="hasAnchor">
<a href="#saving-the-demographic-lifestyle-and-comorbidity-data" class="anchor"></a>Saving the demographic, lifestyle, and comorbidity data</h3>
<p>Finally, we save the columns of interest from these data files</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>vars_inc &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"SEQN"</span>,<span class="st">"SDDSRVYR"</span>,</span>
<span id="cb13-2"><a href="#cb13-2"></a>              <span class="st">"SDMVPSU"</span>,<span class="st">"SDMVSTRA"</span>,<span class="st">"WTINT2YR"</span>,<span class="st">"WTMEC2YR"</span>,</span>
<span id="cb13-3"><a href="#cb13-3"></a>              <span class="st">"RIDAGEMN"</span>,<span class="st">"RIDAGEEX"</span>,<span class="st">"RIDAGEYR"</span>,<span class="st">"BMI"</span>,<span class="st">"BMI_cat"</span>,<span class="st">"Race"</span>,<span class="st">"Gender"</span>,</span>
<span id="cb13-4"><a href="#cb13-4"></a>              <span class="st">"Diabetes"</span>,<span class="st">"CHF"</span>,<span class="st">"CHD"</span>,<span class="st">"Cancer"</span>,<span class="st">"Stroke"</span>,</span>
<span id="cb13-5"><a href="#cb13-5"></a>              <span class="st">"EducationAdult"</span>,<span class="st">"MobilityProblem"</span>,</span>
<span id="cb13-6"><a href="#cb13-6"></a>              <span class="st">"DrinkStatus"</span>,<span class="st">"DrinksPerWeek"</span>,<span class="st">"SmokeCigs"</span>)</span>
<span id="cb13-7"><a href="#cb13-7"></a>Covariate_C &lt;-<span class="st"> </span>Covariate_C[,vars_inc]</span>
<span id="cb13-8"><a href="#cb13-8"></a>Covariate_D &lt;-<span class="st"> </span>Covariate_D[,vars_inc]</span>
<span id="cb13-9"><a href="#cb13-9"></a></span>
<span id="cb13-10"><a href="#cb13-10"></a><span class="kw"><a href="https://rdrr.io/r/base/save.html">save</a></span>(Covariate_C, <span class="dt">file=</span><span class="st">"Covariate_C.rda"</span>, <span class="dt">compress=</span><span class="st">"xz"</span>)</span>
<span id="cb13-11"><a href="#cb13-11"></a><span class="kw"><a href="https://rdrr.io/r/base/save.html">save</a></span>(Covariate_D, <span class="dt">file=</span><span class="st">"Covariate_D.rda"</span>, <span class="dt">compress=</span><span class="st">"xz"</span>)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#processing-the-accelerometry-data-and-creating-wearnon-wear-flags">Processing the accelerometry data and creating wear/non-wear flags</a></li>
      <li><a href="#processing-the-mortality-data">Processing the mortality data</a></li>
      <li><a href="#processing-the-demographic-survey-design-lifestyle-and-comorbiditiy-variables">Processing the demographic, survey design, lifestyle, and comorbiditiy variables</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Andrew Leroux.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
